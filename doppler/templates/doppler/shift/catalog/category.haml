- extends 'doppler/shift/catalog/base.haml'
- load i18n
- load seo

- block main_container_class
    -#with_sidebar
    -#- ifequal category.level 0'
    -#    promo
    -#- else
    -#    EAT THAT

- block title
    - get_metadata as metadata
    - if not metadata.title.value
        = category.name
    - else
        = metadata.title.value

- block inner_breadcrumbs
    - include 'doppler/shift/catalog/snippets/breadcrumbs/catalog.haml'
    - include 'doppler/shift/catalog/snippets/breadcrumbs/category.haml'

- block page_caption
    = category.name
    - ifequal season_filter 'winter'
        ({% trans "winter" %})
    - ifequal season_filter 'summer'
        ({% trans "summer" %})

-#- block doppler_content
- block catalog_tree
    -#- ifequal category.level 0
    -#    - block picture
    -#        %img{:src => '{{ category.main_image.image.url }}', :width => '805px'}
    -#- else

    - if category.description
        = category.description|safe
    - if subcategories
        - with categories=subcategories
            - include 'doppler/shift/catalog/snippets/category_list.haml'
    - if products
        - include 'doppler/shift/catalog/snippets/product_list.haml'
    - if not products and not subcategories
        %p.alert.alert-info
            {% trans "This category is empty" %}

- block additional_fixed_ui
    .season_filter_fixed
        %h3 {% trans "Show" %}
        %ul
            %li
                %a{:href => '?season_filter=winter', :class => '{% ifequal season_filter "winter" %}active{% endifequal %}'}
                    {% trans "winter hats" %}
            %li
                %a{:href => '?season_filter=summer', :class => '{% ifequal season_filter "summer" %}active{% endifequal %}'}
                    {% trans "summer hats" %}
            %li
                %a{:href => '?season_filter=all', :class => '{% ifequal season_filter "all" %}active{% endifequal %}'}
                    {% trans "all hats" %}
