- load i18n
%ul.products.thumbnails{'style': "margin-left: -22px;"}
    - for product in products
        %li.thumbnail.position-thumbnail{'style': "margin-left: 17px; min-width: 296px; min-height: 260px"}
            %a{'href': '{{ product.get_absolute_url }}'}
                .version.version300x186
                    - with image=product.main_image no_link=1 thumbnail_version="300x186"
                        - include 'doppler/shift/catalog/snippets/image.haml'
                %h3{'style': 'max-width: 292px;'}
                    = product.name
                - if not product.price and product.remainder
                    .pull-right
                        - if product.price
                            %strong
                                = product.price
                            - if product.remainder
                                %em
                                    = product.remainder
                            - else
                                {% trans "<a href='mailto:zakaz@westernunit.ru'>On request</a>" %}
                        - else
                            %em
                                {% trans "<a href='mailto:zakaz@westernunit.ru'>On request</a>" %}
            - if product.price and product.remainder
                .add_to_cart_form
                    %form.add_to_cart.product_add_form{'method': 'POST', 'action': '{{ product.get_absolute_url }}'}
                        .ajax_loading_indicator{:style => 'display: none;'}
                            wait a second...
                        %button.submit{'type': 'submit'}
                            {% trans "Buy" %}
                        - csrf_token
                        = product.form.shipment
                        = product.form.quantity
