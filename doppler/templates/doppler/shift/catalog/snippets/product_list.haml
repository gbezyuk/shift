- load i18n
%ul.products.thumbnails{'style': "margin-left: -22px;"}
    - for product in products
        %li.thumbnail.position-thumbnail{'style': "margin-left: 17px; min-width: 296px; min-height: 260px"}
            %a{'href': '{{ product.get_absolute_url }}'}
                .version.version300x186
                    - with image=product.main_image no_link=1 thumbnail_version="300x186"
                        - include 'doppler/shift/catalog/snippets/image.haml'
                - if product.price
                    .pull-right
                        %strong
                            = product.price
                            {% trans "Rub" %}
                %h3{'style': 'max-width: 240px; max-height:30px; overflow: hidden;'}
                    = product.name
                - if not product.price or not product.remainder
                    .pull-right
                        %em
                            {% trans "<a href='mailto:zakaz@westernunit.ru'>On request</a>" %}
            - if product.price and product.remainder
                .add_to_cart_form
                    %form.add_to_cart.product_add_form{'method': 'POST', 'action': '{{ product.get_absolute_url }}'}

                        .added_ok{:style => 'display: none;'}
                            {% trans "Product added!" %}
                        .ajax_loading_indicator{:style => 'display: none;'}
                            {% trans "Adding to cart..." %}
                        %button.submit{'type': 'submit'}
                            {% trans "Buy" %}
                        - csrf_token
                        = product.form.shipment
                        = product.form.quantity
