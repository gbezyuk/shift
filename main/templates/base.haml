- extends 'html5_empty.haml'
- load i18n

- block sitewide_styles
    %link{'rel': 'stylesheet', 'href':'{{ MEDIA_URL }}bootstrap/css/bootstrap.min.css', 'type': 'text/css'}
    %link{'rel': 'stylesheet', 'href': '{{ MEDIA_URL }}jquery-lightbox/css/jquery.lightbox-0.5.css', 'type': 'text/css'}
    %link{'rel': 'stylesheet', 'href':'{{ MEDIA_URL }}css/bootstrap-tuning.css', 'type': 'text/css'}

- block sitewide_scripts
    %script{'type': 'text/javascript', 'src': '{{ MEDIA_URL }}js/jquery/jquery-1.7.2.min.js'}
    %script{'type': 'text/javascript', 'src': '{{ MEDIA_URL }}bootstrap/js/bootstrap.min.js'}
    %script{'type': 'text/javascript', 'src': '{{ MEDIA_URL }}jquery-lightbox/js/jquery.lightbox-0.5.js'}
    %script{'type': 'text/javascript', 'src': '{{ MEDIA_URL }}js/global.js'}

- block body
    - block navbar
        .navbar.navbar-fixed-top
            .navbar-inner
                .container
                    %a.brand{'href': '/'}
                        {% trans "Doppler Shift" %}
                    .nav-collapse
                        %ul.nav
                            - include 'home_link.haml'
                            - include 'doppler/shift/catalog/snippets/breadcrumbs/catalog.haml'
                        %ul.nav.pull-right
                            - if request.user.is_anonymous
                                %li
                                    %a#login-modal-toggler{'data-toggle': 'modal', 'href': '{{ LOGIN_URL }}'}
                                        {% trans "login" %}
                            - else
                                %li.dropdown
                                    {% trans "You are logged in as " %}
                                    %i.icon-user
                                    %strong
                                        = request.user.username
    - block main_container
        .container.main_container
            - block breadcrumbs
            - if messages
                - for message in messages
                    %div{'class': 'alert alert-{{ message.tags }}'}
                        = message
            %h1.page_caption
                - block page_caption
            - block content

            %footer.footer
                %p.pull-right
                    %a{'href': "#"}
                        {% trans "Back to top" %}

    - block modals
        - block login_modal
            %form#login-modal.modal.hide.fade.in.well{'method': 'POST', 'action': '{{ LOGIN_URL }}'}
                - csrf_token
                .modal-header
                    %a.close{'data-dismiss': "modal"}Ã—
                    %h3
                        {% trans "Login" %}
                .modal-body
                    %label{'for': 'id_username'}
                        {% trans "Username" %}:
                    %input#id_username{'name': 'username', 'maxlength': '100', 'type': 'text'}
                    %label{'for': 'id_password'}
                        {% trans "Password" %}:
                    %input#id_password{'name': 'password', 'maxlength': '100', 'type': 'password'}
                    %input#id_next{'name': 'next', 'maxlength': '100', 'type': 'hidden', 'value': '{{ request.get_full_path }}'}
                .modal-footer
                    %button.btn.btn-primary{'type': 'submit'}
                        {% trans "Login" %}
